(this["webpackJsonpsolid-budget"]=this["webpackJsonpsolid-budget"]||[]).push([[0],{387:function(e,t,n){},389:function(e,t,n){},463:function(e,t){},519:function(e,t,n){"use strict";n.r(t);var c,a,r,i=n(0),s=n(26),o=n.n(s),l=(n(387),n(12)),j=n(5),u=n.n(j),b=n(9),d=n(11),O=(n(389),n(61)),h=n(162),f=n(174),x=n(23),p=n(54),m=n(544),g=n(36),v=n(533),y=n(160),S=n.n(y),C=n(10),N=n(17),w=n(32),k={light:"#e6cad4",dark:"#795a3f",primary:"#4c1e81",secondary:"#0787a2"},A=Object(i.createContext)(k),D=w.default.p(c||(c=Object(g.a)(["\n  color: green;\n  margin: .1em;\n  "]))),T=w.default.p(a||(a=Object(g.a)(["\n  color: red;\n  margin: .1em;\n"]))),R=w.default.div(r||(r=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  font-style: italic;\n  opacity: .5;\n  margin-top: .5em;\n"])));function B(e){var t=+e,n=Math.ceil(100*t)+"";return{dollar:n.slice(0,-2),full:"".concat(n.slice(0,-2),".").concat(n.slice(-2)),ceil:function(){return+n.slice(0,-2)+1}}}function E(e,t,n){var c=Math.floor((t.getTime()-e.getTime())/864e5)%14;return!c&&n?t.getDate():t.getDate()+14-c}function F(e,t,n,c){return e.filter((function(e){return+e.date>=t&&+e.date<=n&&(!e.month||!e.month.length||e.month.includes(c))})).reduce((function(e,t){return+t.debit+e}),0)}var L,I,M,U,P,Q,H,V,q,J,W,_,z,$=n(19),G=n(14),K=n(523),X=n(553),Y=n(4),Z=function(e){var t=e.value,n=e.onUpdate,c=Object(i.useState)(!1),a=Object(d.a)(c,2),r=a[0],s=a[1],o=Object(i.useState)(0),l=Object(d.a)(o,2),j=l[0],u=l[1];function b(e){return function(){n(+t+ +j*e),u(0)}}return Object(Y.jsxs)(C.Column,{children:[Object(Y.jsx)(C.Row,{justify:"flex-end",align:"center",children:Object(Y.jsx)(K.a,{value:t||0,onChange:function(e){return n(e.target.value)},style:{width:"7em"},type:"number",startAdornment:Object(Y.jsx)(C.Icon,{theme:k,onClick:function(){return s(!r)},className:"material-icons",children:"calculate"}),placeholder:"balance"})}),r&&Object(Y.jsxs)(C.Row,{align:"center",justify:"flex-end",children:[Object(Y.jsx)(C.Icon,{onClick:b(1),className:"material-icons",children:"add"}),Object(Y.jsx)(ee,{value:j,onChange:function(e){return u(e.target.value)},type:"number"}),Object(Y.jsx)(C.Icon,{theme:k,onClick:b(-1),className:"material-icons",children:"remove"})]})]})},ee=w.default.input(L||(L=Object(g.a)(["\n  border: none;\n  background: whitesmoke;\n  border-radius: 5px;\n  width: 50px;\n  margin: 10px 0px;\n  padding: 5px;\n  font-size: .7em;\n"]))),te=n(28),ne=n(38),ce={title:{predicate:ne.FOAF.title,parse:te.getStringNoLocale,set:te.setStringNoLocale},balance:{predicate:ne.VCARD.value,parse:te.getStringNoLocale,set:te.setStringNoLocale},primary:{predicate:ne.FOAF.focus,parse:te.getBoolean,set:te.setBoolean}},ae=n(362),re=n(545),ie=n(557),se=n(549),oe=n(550),le=n(551),je=n(555),ue=n(552),be=function(e){var t=e.accounts,n=e.onSubmit,c=Object(i.useContext)(A),a=Object(i.useState)({}),r=Object(d.a)(a,2),s=r[0],o=r[1];function j(e){return function(t){o(Object(l.a)(Object(l.a)({},s),{},Object($.a)({},e,t.target.value)))}}return Object(Y.jsxs)(C.Column,{children:[Object(Y.jsx)(C.CardHeader,{children:"New Bucket"}),Object(Y.jsx)(C.Divider,{theme:c}),Object(Y.jsxs)(C.Row,{children:[Object(Y.jsx)(K.a,{onChange:j("name"),style:{flex:2},placeholder:"name"}),Object(Y.jsx)(K.a,{onChange:j("balance"),style:{flex:1},type:"number",placeholder:"balance"})]}),Object(Y.jsxs)(ae.a,{fullWidth:!0,children:[Object(Y.jsx)(re.a,{children:"Account"}),Object(Y.jsx)(ie.a,{value:s.account||"",label:"Account",onChange:j("account"),children:t.map((function(e){var t=e.title;return Object(Y.jsx)(se.a,{value:t,children:t},t)}))})]}),Object(Y.jsx)(oe.a,{children:Object(Y.jsx)(le.a,{control:Object(Y.jsx)(je.a,{onChange:function(e){o(Object(l.a)(Object(l.a)({},s),{},{pinned:e.target.checked}))},color:"secondary"}),label:"Pinned"})}),Object(Y.jsx)(ue.a,{onClick:function(){return n(s)},variant:"outlined",color:"secondary",children:"Add"})]})},de={name:{predicate:ne.FOAF.name,parse:te.getStringNoLocale,set:te.setStringNoLocale},account:{predicate:ne.FOAF.account,parse:te.getStringNoLocale,set:te.setStringNoLocale},balance:{predicate:ne.VCARD.value,parse:te.getStringNoLocale,set:te.setStringNoLocale},pinned:{predicate:ne.FOAF.focus,parse:te.getBoolean,set:te.setBoolean}},Oe=function(e){var t=e.bucket,n=e.onUpdate,c=e.updateBalance,a=e.accounts,r=e.onDelete,s=Object(i.useState)(!1),o=Object(d.a)(s,2),l=o[0],j=o[1];return Object(Y.jsxs)(C.Card,{children:[Object(Y.jsxs)(C.Row,{children:[l?Object(Y.jsxs)(C.Column,{children:[Object(Y.jsx)(K.a,{value:t.name,onChange:n(t,"name")}),Object(Y.jsxs)(ae.a,{children:[Object(Y.jsx)(re.a,{children:"Account"}),Object(Y.jsx)(ie.a,{value:t.account||"",label:"Account",onChange:n(t,"account"),children:a.map((function(e){var t=e.title;return Object(Y.jsx)(se.a,{value:t,children:t},t)}))})]})]}):Object(Y.jsxs)(C.Column,{children:[Object(Y.jsx)(C.CardHeader,{children:t.name}),a.some((function(e){return e.title===t.account}))?Object(Y.jsx)(C.Subtitle,{children:t.account}):Object(Y.jsx)(he,{children:"No Valid Account"})]}),Object(Y.jsx)(C.Spacer,{}),Object(Y.jsx)(v.a,{onClick:function(){return j(!l)},color:"primary",children:Object(Y.jsx)("span",{className:"material-icons",children:l?"close":"edit"})}),l?Object(Y.jsx)(v.a,{onClick:function(){return r(t)},color:"secondary",children:Object(Y.jsx)("span",{className:"material-icons",children:"delete"})}):Object(Y.jsx)(v.a,{onClick:n(t,"pinned",!0),color:"primary",children:Object(Y.jsx)("span",{className:"material-icons",children:t.pinned?"star":"star_outline"})})]}),Object(Y.jsx)(C.Divider,{theme:k}),Object(Y.jsx)(C.Row,{justify:"flex-end",children:Object(Y.jsx)(Z,{value:t.balance,onUpdate:function(e){return c(t,e)}})})]})},he=w.default.p(I||(I=Object(g.a)(["\n  color: red;\n"]))),fe=function(e){var t=e.onUpdate,n=Object(i.useContext)(N.SaveState),c=n.updateQueue,a=n.queue,r=n.dataset,s=n.setDataset,o=n.setBuckets,j=Object(i.useState)(!1),O=Object(d.a)(j,2),h=O[0],f=O[1],x=Object(i.useState)(!1),p=Object(d.a)(x,2),m=p[0],g=p[1],y=Object(i.useState)([]),S=Object(d.a)(y,2),w=S[0],k=S[1],A=Object(i.useState)([]),D=Object(d.a)(A,2),T=D[0],R=D[1];function B(){return B=Object(b.a)(u.a.mark((function e(n){var c,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!1),e.next=3,Object(N.initThing)("bucket",n,de);case 3:c=e.sent,a=c.dataset,r=c.thing,n=Object(l.a)(Object(l.a)({},n),{},{thing:r}),k(n.pinned?[n].concat(Object(G.a)(w)):[].concat(Object(G.a)(w),[n])),t([].concat(Object(G.a)(w),[n])),s(a);case 10:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}function E(e){return F.apply(this,arguments)}function F(){return(F=Object(b.a)(u.a.mark((function e(n){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=w.findIndex((function(e){return e.thing.url===n.thing.url})),e.next=3,Object(N.deleteThing)(n.thing);case 3:k([].concat(Object(G.a)(w.slice(0,c)),Object(G.a)(w.slice(c+1)))),t([].concat(Object(G.a)(w.slice(0,c)),Object(G.a)(w.slice(c+1))));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,n,r){var i=w.findIndex((function(t){return t.thing.url===e.thing.url}));return function(s){var o,j=r?!e[n]:s.target.value,u=Object(N.setAttr)(e.thing,de[n],j);c(Object(N.addToUpdateQueue)(a,u));var b=[].concat(Object(G.a)(w.slice(0,i)),[Object(l.a)(Object(l.a)({},e),{},(o={},Object($.a)(o,n,j),Object($.a)(o,"thing",u),o))],Object(G.a)(w.slice(i+1)));r&&(b=b.sort((function(e){return e.pinned?-1:0}))),k(b),t(b)}}function I(e,n){var r=w.findIndex((function(t){return t.thing.url===e.thing.url})),i=Object(N.setAttr)(e.thing,de.balance,n);c(Object(N.addToUpdateQueue)(a,i)),k([].concat(Object(G.a)(w.slice(0,r)),[Object(l.a)(Object(l.a)({},e),{},{balance:n,thing:i})],Object(G.a)(w.slice(r+1)))),t([].concat(Object(G.a)(w.slice(0,r)),[Object(l.a)(Object(l.a)({},e),{},{balance:n,thing:i})],Object(G.a)(w.slice(r+1))))}return Object(i.useEffect)((function(){if(r){var e=Object(N.loadAllByName)(r,"bucket",de);o(e),k(e.sort((function(e,t){return e.name.localeCompare(t.name)})).sort((function(e){return e.pinned?-1:0}))),R(Object(N.loadAllByName)(r,"account",ce))}}),[r,o]),Object(Y.jsxs)(xe,{children:[Object(Y.jsxs)(C.Row,{align:"center",children:[Object(Y.jsxs)(C.CardHeader,{children:[w.length," Buckets"]}),Object(Y.jsx)(C.Spacer,{}),Object(Y.jsx)(v.a,{onClick:function(){return g(!m)},color:"primary",children:Object(Y.jsx)("span",{className:"material-icons",children:m?"visibility_off":"visibility"})}),Object(Y.jsx)(v.a,{onClick:function(){return f(!h)},color:"primary",children:Object(Y.jsx)("span",{className:"material-icons",children:h?"close":"add"})})]}),h&&Object(Y.jsx)(C.Card,{children:Object(Y.jsx)(be,{accounts:T,onSubmit:function(e){return B.apply(this,arguments)}})}),m&&w.map((function(e){return Object(Y.jsx)(Oe,{bucket:e,onUpdate:L,accounts:T,updateBalance:I,onDelete:E},e.thing.url)}))]})},xe=w.default.div(M||(M=Object(g.a)(["\n  width: 90%;\n"]))),pe=function(e){var t=e.onSubmit,n=Object(i.useState)({}),c=Object(d.a)(n,2),a=c[0],r=c[1];function s(e){return function(t){r(Object(l.a)(Object(l.a)({},a),{},Object($.a)({},e,t.target.value)))}}return Object(Y.jsxs)(C.Column,{children:[Object(Y.jsxs)(C.Row,{children:[Object(Y.jsx)(K.a,{onChange:s("title"),style:{flex:2},placeholder:"title"}),Object(Y.jsx)(K.a,{onChange:s("balance"),style:{flex:1},type:"number",placeholder:"balance"})]}),Object(Y.jsx)(oe.a,{children:Object(Y.jsx)(le.a,{control:Object(Y.jsx)(je.a,{onChange:function(e){r(Object(l.a)(Object(l.a)({},a),{},{primary:e.target.checked}))},color:"secondary"}),label:"Primary"})}),Object(Y.jsx)(ue.a,{onClick:function(){return t(a)},variant:"outlined",color:"secondary",children:"Add"})]})},me={NONE:"NONE",UPDATE:"UPDATE",TRANSFER:"TRANSFER"},ge=function(e){var t=e.dataset,n=e.onSubmit,c=Object(i.useContext)(A),a=Object(i.useState)({actionType:me.NONE}),r=Object(d.a)(a,2),s=r[0],o=r[1],j=Object(i.useState)([]),u=Object(d.a)(j,2),b=u[0],O=u[1];function h(e,t){return function(n){o(Object(l.a)(Object(l.a)({},s),{},Object($.a)({},e,t?+n.target.value:n.target.value)))}}return Object(i.useEffect)((function(){if(t){var e=Object(N.loadAllByName)(t,"account",ce),n=Object(N.loadAllByName)(t,"bucket",de);O([].concat(Object(G.a)(e),Object(G.a)(n)))}}),[t]),Object(Y.jsxs)(C.Column,{width:"95%",children:[Object(Y.jsx)(C.CardHeader,{children:"New Note"}),Object(Y.jsx)(C.Divider,{theme:c}),Object(Y.jsx)(K.a,{onChange:h("text"),placeholder:"Take a note."}),Object(Y.jsxs)(C.Row,{children:[Object(Y.jsxs)(ae.a,{children:[Object(Y.jsx)(re.a,{children:"Action"}),Object(Y.jsx)(ie.a,{value:s.actionType,label:"Action",onChange:h("actionType"),children:Object.entries(me).map((function(e){var t=Object(d.a)(e,2),n=(t[0],t[1]);return Object(Y.jsx)(se.a,{value:n,children:n},n)}))})]}),Object(Y.jsx)(C.Spacer,{}),s.actionType!==me.NONE&&Object(Y.jsx)(K.a,{onChange:h("value",!0),type:"number",placeholder:"value"})]}),s.actionType!==me.NONE&&Object(Y.jsxs)(C.Row,{children:[Object(Y.jsxs)(ae.a,{fullWidth:!0,children:[Object(Y.jsx)(re.a,{children:"Account"}),Object(Y.jsx)(ie.a,{value:s.account||"",label:"Account",onChange:h("account"),children:b.map((function(e){return Object(Y.jsx)(se.a,{value:e.thing.url,children:e.title||e.name},e.thing.url)}))})]}),s.actionType===me.TRANSFER&&Object(Y.jsxs)(ae.a,{fullWidth:!0,children:[Object(Y.jsx)(re.a,{children:"Account"}),Object(Y.jsx)(ie.a,{value:s.target||"",label:"Target",onChange:h("target"),children:b.map((function(e){return Object(Y.jsx)(se.a,{value:e.thing.url,children:e.title||e.name},e.thing.url)}))})]})]}),Object(Y.jsx)(C.Spacer,{height:"1em"}),Object(Y.jsx)(ue.a,{onClick:function(){return n(s)},variant:"outlined",color:"secondary",children:"Add"}),Object(Y.jsx)(C.Spacer,{height:".5em"})]})},ve={notes:{predicate:ne.FOAF.Document,parse:N.getAndParse,set:N.stringifyAndSet}},ye=function(){var e=Object(i.useContext)(N.SaveState),t=e.dataset,n=e.updateQueue,c=e.queue,a=Object(i.useState)({notes:[]}),r=Object(d.a)(a,2),s=r[0],o=r[1],j=Object(i.useState)(!1),O=Object(d.a)(j,2),h=O[0],f=O[1];function x(e){var t=Object(l.a)(Object(l.a)({},s),{},{notes:[].concat(Object(G.a)(s.notes.slice(0,e)),Object(G.a)(s.notes.slice(e+1)))}),n=Object(N.setAllAttr)(t.thing,t);return o(Object(l.a)(Object(l.a)({},t),{},{thing:n})),n}function p(e,n){var c=e.indexOf("account")>=0?ce:de,a=Object(N.loadByName)(t,e,c);return a.balance=n+ +a.balance,Object(N.setAllAttr)(a.thing,a)}function m(e){return function(){var t=s.notes[e],a=[];t.actionType===me.UPDATE?a=[].concat(Object(G.a)(a),[p(t.account,t.value)]):t.actionType===me.TRANSFER&&(a=[].concat(Object(G.a)(a),[p(t.account,-1*t.value)]),a=[].concat(Object(G.a)(a),[p(t.target,t.value)])),a=[].concat(Object(G.a)(a),[x(e)]),n(a.reduce((function(e,t){return Object(N.addToUpdateQueue)(e,t)}),c))}}return Object(i.useEffect)((function(){if(t){var e=Object(N.loadByName)(t,"notes",ve);e?o(e):Object(b.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(N.initThing)("notes",{notes:[]},ve);case 2:t=e.sent,o(t);case 4:case"end":return e.stop()}}),e)})))()}}),[t]),Object(Y.jsxs)(C.Pane,{width:"100%",children:[Object(Y.jsxs)(C.Row,{align:"center",children:[Object(Y.jsx)(C.CardHeader,{children:"Notes"}),Object(Y.jsx)(C.Spacer,{}),Object(Y.jsx)(v.a,{onClick:function(){return f(!h)},color:"primary",children:Object(Y.jsx)("span",{className:"material-icons",children:h?"close":"add"})})]}),h&&Object(Y.jsx)(ge,{onSubmit:function(e){var t=Object(l.a)(Object(l.a)({},s),{},{notes:[].concat(Object(G.a)(s.notes),[e])}),a=Object(N.setAllAttr)(t.thing,t);n(Object(N.addToUpdateQueue)(c,a)),f(!1),o(Object(l.a)(Object(l.a)({},t),{},{thing:a}))},dataset:t}),s.notes.map((function(e,t){return Object(Y.jsx)(Se,{children:Object(Y.jsxs)(C.Row,{align:"center",children:[e.text,Object(Y.jsx)(C.Spacer,{}),Object(Y.jsx)(ue.a,{color:"secondary",onClick:m(t),children:e.actionType===me.NONE?"Done":e.actionType})]})},e.text)}))]})},Se=w.default.div(U||(U=Object(g.a)(["\n  width: 90%;\n  padding: .5em;\n  border: solid 1px ",";\n  border-radius: 3px;\n  margin-bottom: .5em;\n"])),k.secondary),Ce=function(){var e=Object(i.useContext)(N.SaveState),t=e.queue,n=e.updateQueue,c=e.dataset,a=e.setDataset,r=e.setAccounts,s=Object(i.useState)(!1),o=Object(d.a)(s,2),j=o[0],O=o[1],h=Object(i.useState)(!1),f=Object(d.a)(h,2),x=f[0],p=f[1],m=Object(i.useState)([]),g=Object(d.a)(m,2),y=g[0],S=g[1],w=Object(i.useState)([]),A=Object(d.a)(w,2),D=A[0],T=A[1];function R(){return R=Object(b.a)(u.a.mark((function e(t){var n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!1),e.next=3,Object(N.initThing)("account",t,ce);case 3:n=e.sent,c=n.dataset,r=n.saved,S([].concat(Object(G.a)(y),[Object(l.a)(Object(l.a)({},t),{},{saved:r})])),a(c);case 8:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function B(e,c){var a=y.findIndex((function(t){return t.thing.url===e.thing.url}));return function(r){var i,s=Object(N.setAttr)(e.thing,ce[c],r);s?n(Object(N.addToUpdateQueue)(t,s)):s=e.thing,S([].concat(Object(G.a)(y.slice(0,a)),[Object(l.a)(Object(l.a)({},e),{},(i={},Object($.a)(i,c,r),Object($.a)(i,"thing",s),i))],Object(G.a)(y.slice(a+1))))}}function E(e){return D&&D[e]?D[e].reduce((function(e,t){return+t.balance+e}),0):0}return Object(i.useEffect)((function(){c&&(S(Object(N.loadAllByName)(c,"account",ce).map((function(e){return Object(l.a)(Object(l.a)({},e),{},{details:!!e.details})})).sort((function(e,t){return e.primary?-1:e.title.localeCompare(t.title)}))),T(Object(N.loadAllByName)(c,"bucket",de).reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object($.a)({},t.account,e[t.account]?[].concat(Object(G.a)(e[t.account]),[t]):[t]))}),{})))}),[c]),Object(i.useEffect)((function(){return r(y)}),[y,r]),Object(Y.jsxs)(C.Pane,{width:"100%",children:[Object(Y.jsxs)(C.Card,{children:[Object(Y.jsxs)(C.Row,{align:"center",children:[Object(Y.jsx)(C.CardHeader,{children:"Accounts"}),Object(Y.jsx)(C.Spacer,{}),Object(Y.jsx)(v.a,{onClick:function(){return p(!x)},color:"primary",children:Object(Y.jsx)("span",{className:"material-icons",children:x?"close":"edit"})}),!x&&Object(Y.jsx)(v.a,{onClick:function(){return O(!j)},color:"primary",children:Object(Y.jsx)("span",{className:"material-icons",children:j?"close":"add"})})]}),Object(Y.jsx)(C.Divider,{theme:k}),j&&Object(Y.jsx)(pe,{onSubmit:function(e){return R.apply(this,arguments)}}),y.map((function(e){return Object(Y.jsxs)("span",{children:[Object(Y.jsxs)(C.Row,{children:[x?Object(Y.jsx)(K.a,{value:e.title,onChange:function(t){return B(e,"title")(t.target.value)}}):Object(Y.jsx)(C.Title,{style:{margin:0},children:e.title}),D&&D[e.title]&&!!D[e.title].length&&Object(Y.jsx)(C.Icon,{theme:k,onClick:function(){return B(e,"details")(!e.details)},children:Object(Y.jsx)("span",{className:"material-icons",children:e.details?"expand_less":"expand_more"})}),Object(Y.jsx)(C.Spacer,{}),Object(Y.jsx)(X.a,{badgeContent:+e.balance-E(e.title),color:"secondary",invisible:+e.balance-E(e.title)>=0,children:Object(Y.jsx)(Z,{onUpdate:B(e,"balance"),value:e.balance})})]}),e.details&&D&&D[e.title]&&Object(Y.jsxs)(Ne,{children:[Object(Y.jsx)("p",{children:"Available"}),Object(Y.jsx)(C.Spacer,{}),Object(Y.jsx)("b",{children:+e.balance-D[e.title].reduce((function(e,t){return+t.balance+e}),0)})]}),e.details&&D&&D[e.title]&&D[e.title].sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return Object(Y.jsxs)(Ne,{children:[Object(Y.jsx)("p",{children:e.name}),Object(Y.jsx)(C.Spacer,{}),Object(Y.jsx)("p",{children:e.balance})]},e.thing.url)})),Object(Y.jsx)(C.Divider,{thin:!0,theme:k})]},e.thing.url?e.thing.url:e.title)}))]}),Object(Y.jsx)(fe,{onUpdate:function(e){var t=e.reduce((function(e,t){return Object(l.a)(Object(l.a)({},e),{},Object($.a)({},t.account,e[t.account]?[].concat(Object(G.a)(e[t.account]),[t]):[t]))}),{});T(t)}}),Object(Y.jsx)(ye,{})]})},Ne=w.default.div(P||(P=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  border-bottom: solid 1px whitesmoke;\n"]))),we=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],ke=function(e){var t=e.onSubmit,n=Object(i.useState)({month:[]}),c=Object(d.a)(n,2),a=c[0],r=c[1],s=Object(i.useState)(!0),o=Object(d.a)(s,2),j=o[0],u=o[1];function b(e,t,n){return function(c){var i=c.target.value;(n||t)&&(i=+i>n?n:+i<t?t:i),r(Object(l.a)(Object(l.a)({},a),{},Object($.a)({},e,i)))}}function O(e){return function(){var t=Object(G.a)(a.month),n=t.indexOf(e);r(n>=0?Object(l.a)(Object(l.a)({},a),{},{month:[].concat(Object(G.a)(t.slice(0,n)),Object(G.a)(t.slice(n+1)))}):Object(l.a)(Object(l.a)({},a),{},{month:[].concat(Object(G.a)(t),[e])}))}}return Object(Y.jsxs)(C.Column,{children:[Object(Y.jsxs)(C.Row,{children:[Object(Y.jsx)(K.a,{onChange:b("title"),style:{flex:2},placeholder:"title"}),Object(Y.jsx)(K.a,{onChange:b("debit"),style:{flex:1},type:"number",placeholder:"debit"})]}),Object(Y.jsxs)(C.Row,{align:"center",children:[Object(Y.jsx)(C.Spacer,{}),Object(Y.jsx)(K.a,{onChange:b("date",1,28),type:"number",placeholder:"date"})]}),Object(Y.jsx)(le.a,{checked:j,control:Object(Y.jsx)(je.a,{onChange:function(e){u(e.target.checked),e.target.checked&&r(Object(l.a)(Object(l.a)({},a),{},{month:[]}))},color:"secondary"}),label:"Monthly"}),!j&&Object(Y.jsx)(C.Column,{children:we.map((function(e,t){return Object(Y.jsx)(le.a,{control:Object(Y.jsx)(je.a,{onChange:O(t+1),color:"primary"}),label:e})}))}),Object(Y.jsx)(ue.a,{onClick:function(){return t(a)},variant:"outlined",color:"secondary",children:"Add"})]})},Ae={title:{predicate:ne.FOAF.name,parse:te.getStringNoLocale,set:te.setStringNoLocale},debit:{predicate:ne.VCARD.value,parse:te.getStringNoLocale,set:te.setStringNoLocale},date:{predicate:ne.VCARD.Date,parse:te.getStringNoLocale,set:te.setStringNoLocale},month:{predicate:ne.VCARD.note,parse:N.getAndParse,set:N.stringifyAndSet},inactive:{predicate:ne.VCARD.hasSource,parse:te.getBoolean,set:te.setBoolean}},De=function(e){var t=e.onSubmit,n=e.savedSettings,c=Object(i.useState)({}),a=Object(d.a)(c,2),r=a[0],s=a[1];function o(e){return function(t){var n=t.target.value;s(Object(l.a)(Object(l.a)({},r),{},Object($.a)({},e,n)))}}return Object(i.useEffect)((function(){n&&s(n)}),[n]),Object(Y.jsxs)(C.Column,{children:[Object(Y.jsxs)(C.Row,{children:[Object(Y.jsx)(K.a,{value:r.payday||"",style:{flex:"2"},onChange:o("payday"),placeholder:"past payday (mm/dd/yyyy)"}),Object(Y.jsx)(C.Spacer,{width:"1em"}),Object(Y.jsx)(K.a,{value:r.paycheck||"",style:{flex:"1"},onChange:o("paycheck"),type:"number",placeholder:"paycheck"})]}),Object(Y.jsx)(ue.a,{style:{marginTop:"1em"},onClick:function(){return t(r)},variant:"outlined",color:"secondary",children:"Save"})]})},Te={payday:{predicate:ne.VCARD.Date,parse:te.getStringNoLocale,set:te.setStringNoLocale},paycheck:{predicate:ne.VCARD.value,parse:te.getStringNoLocale,set:te.setStringNoLocale}},Re=function(){var e=Object(i.useContext)(N.SaveState),t=e.dataset,n=e.setDataset,c=e.accounts,a=e.buckets,r=e.queue,s=e.updateQueue,o=Object(i.useState)(!1),j=Object(d.a)(o,2),O=j[0],h=j[1],f=Object(i.useState)(!1),x=Object(d.a)(f,2),p=x[0],m=x[1],g=Object(i.useState)({}),y=Object(d.a)(g,2),S=y[0],w=y[1],A=Object(i.useState)(!1),D=Object(d.a)(A,2),T=D[0],R=D[1],L=Object(i.useState)([]),I=Object(d.a)(L,2),M=I[0],U=I[1],P=Object(i.useState)(null),Q=Object(d.a)(P,2),H=Q[0],V=Q[1],q=Object(i.useState)(null),J=Object(d.a)(q,2),W=J[0],_=J[1],z=Object(i.useState)(new Date),X=Object(d.a)(z,1)[0];function Z(e,t,n){return function(c){var a,i=M.findIndex((function(t){return e.thing.url===t.thing.url})),o=n?+c.target.value:c.target.value,j=Object(N.setAllAttr)(e.thing,Object(l.a)(Object(l.a)({},e),{},Object($.a)({},t,o)));s(Object(N.addToUpdateQueue)(r,j)),U([].concat(Object(G.a)(M.slice(0,i)),[Object(l.a)(Object(l.a)({},e),{},(a={},Object($.a)(a,t,o),Object($.a)(a,"thing",j),a))],Object(G.a)(M.slice(i+1))))}}function ee(){return ee=Object(b.a)(u.a.mark((function e(t){var c,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!1),e.next=3,Object(N.initThing)("bill",t,Ae);case 3:c=e.sent,a=c.dataset,r=c.thing,U([].concat(Object(G.a)(M),[Object(l.a)(Object(l.a)({},t),{},{thing:r})]).sort((function(e,t){return+e.date-+t.date}))),n(a);case 8:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}function te(){return te=Object(b.a)(u.a.mark((function e(t){var c,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=M.findIndex((function(e){return e.thing.url===t.thing.url})),e.next=3,Object(N.deleteThing)(t.thing);case 3:a=e.sent,r=a.dataset,U([].concat(Object(G.a)(M.slice(0,c)),Object(G.a)(M.slice(c+1)))),n(r);case 7:case"end":return e.stop()}}),e)}))),te.apply(this,arguments)}function ne(){return ne=Object(b.a)(u.a.mark((function e(t){var c,a,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S.thing){e.next=9;break}return e.next=4,Object(N.initThing)("settings",t,Te);case 4:r=e.sent,a=r.dataset,c=r.thing,e.next=15;break;case 9:return c=Object(N.setAllAttr)(S.thing,t),e.next=12,Object(N.saveThing)(c);case 12:i=e.sent,a=i.dataset,c=i.saved;case 15:w(Object(l.a)(Object(l.a)({},t),{},{thing:c})),n(a),R(!1);case 18:case"end":return e.stop()}}),e)}))),ne.apply(this,arguments)}return Object(i.useEffect)((function(){t&&(U(Object(N.loadAllByName)(t,"bill",Ae).sort((function(e,t){return+e.date-+t.date}))),w(Object(N.loadByName)(t,"settings",Te)))}),[t]),Object(i.useEffect)((function(){c&&V(c.find((function(e){return e.primary})))}),[c]),Object(i.useEffect)((function(){H&&a&&_(a.filter((function(e){return e.account===H.title})))}),[H,a]),Object(Y.jsx)(C.Pane,{width:"100%",children:Object(Y.jsxs)(C.Card,{children:[Object(Y.jsxs)(C.Row,{align:"center",children:[Object(Y.jsx)(C.CardHeader,{children:"Bill Schedule"}),Object(Y.jsx)(C.Spacer,{}),Object(Y.jsx)(v.a,{onClick:function(){return m(!p)},color:"primary",children:Object(Y.jsx)("span",{className:"material-icons",children:p?"done":"edit"})}),Object(Y.jsx)(v.a,{onClick:function(){return R(!T)},color:"primary",children:Object(Y.jsx)("span",{className:"material-icons",children:"settings"})}),Object(Y.jsx)(v.a,{onClick:function(){return h(!O)},color:"primary",children:Object(Y.jsx)("span",{className:"material-icons",children:O?"close":"add"})})]}),Object(Y.jsx)(C.Divider,{theme:k}),T&&Object(Y.jsx)(De,{onSubmit:function(e){return ne.apply(this,arguments)},savedSettings:S}),O&&Object(Y.jsx)(ke,{onSubmit:function(e){return ee.apply(this,arguments)}}),function(){if(!H||!M.length)return Object(Y.jsx)(Y.Fragment,{});var e,t=W?W.reduce((function(e,t){return+t.balance+e}),0):0,n=+H.balance-t,c=n,a=function(){if(!S.payday&&!S.paycheck)return[];var e=new Date(X.getTime()),t=E(new Date(S.payday),e);e.setDate(t),t=e.getDate();for(var n=[],c=0;c<3;c++)n.push({title:"Payday",credit:+S.paycheck,date:t,month:e.getMonth()+1}),e.setDate(t+14),t=e.getDate();return n}(),i=[],o=function(){var t=new Date(X.getTime());t.setDate(X.getDate()+e);var o=t.getMonth()+1,j=M.filter((function(e){return+e.date===t.getDate()&&((!e.month||!e.month.length||e.month.includes(o))&&!e.inactive||p)})).map((function(e){return n-=e.debit,c=n<c?n:c,Object(Y.jsxs)(Be,{children:[Object(Y.jsxs)(C.Column,{children:[Object(Y.jsxs)(C.Row,{children:[Object(Y.jsxs)(Ie,{children:[p&&e.month&&e.month.length?"(".concat(e.month.join("|"),")"):o,"/",e.date]}),Object(Y.jsx)("p",{className:"clickable",onClick:function(){return function(e){if(e.thing){var t=M.findIndex((function(t){return t.thing.url===e.thing.url}));U([].concat(Object(G.a)(M.slice(0,t)),[Object(l.a)(Object(l.a)({},e),{},{override:!e.override})],Object(G.a)(M.slice(t+1))))}}(e)},children:e.title})]}),p&&Object(Y.jsx)(le.a,{checked:!e.inactive,control:Object(Y.jsx)(je.a,{onChange:(t=e,function(){var e=M.findIndex((function(e){return t.thing.url===e.thing.url})),n=Object(N.setAllAttr)(t.thing,Object(l.a)(Object(l.a)({},t),{},{inactive:!t.inactive}));s(Object(N.addToUpdateQueue)(r,n)),U([].concat(Object(G.a)(M.slice(0,e)),[Object(l.a)(Object(l.a)({},t),{},{inactive:!t.inactive,thing:n})],Object(G.a)(M.slice(e+1))))}),color:"secondary"}),label:"Active"})]}),Object(Y.jsx)(C.Spacer,{}),Object(Y.jsxs)(C.Column,{align:"flex-end",children:[p?Object(Y.jsx)(K.a,{style:{width:75},type:"number",onChange:Z(e,"debit",!0),value:e.debit}):Object(Y.jsxs)(Fe,{children:["(",e.debit,")"]}),!p&&Object(Y.jsx)("p",{style:{margin:0},children:B(n).dollar})]}),p&&e.debit&&Object(Y.jsx)(v.a,{onClick:function(){return function(e){return te.apply(this,arguments)}(e)},color:"secondary",children:Object(Y.jsx)("span",{className:"material-icons",children:"delete"})})]},e.title+e.date);var t}));i=[].concat(Object(G.a)(i),Object(G.a)(j));var u=a.find((function(e){return e.month===o&&e.date===t.getDate()}));u&&(n+=u.credit,i=[].concat(Object(G.a)(i),[Object(Y.jsxs)(Be,{className:"credit",children:[Object(Y.jsxs)(Ie,{children:[o,"/",u.date]}),Object(Y.jsx)("p",{children:u.title}),Object(Y.jsx)(C.Spacer,{}),Object(Y.jsxs)(C.Column,{align:"flex-end",children:[Object(Y.jsxs)(Ee,{children:["(",u.credit,")"]}),Object(Y.jsx)("p",{style:{margin:0},children:B(n).dollar})]})]},u.title+u.date)]))};for(e=0;e<31;e++)o();if(!S.payday&&!S.paycheck)return[Object(Y.jsxs)(C.Row,{children:[Object(Y.jsx)(C.Icon,{className:"material-icons",children:"warning"}),"For full readout please enter estimated paycheck value and a past pay date in settings."]},"info")].concat(Object(G.a)(i));var j=new Date(X.getTime());j.setDate(X.getDate()+e);var u=a[a.length-1],b=n-F(M,j.getDate(),u.date,u.month);return i=[Object(Y.jsxs)(Le,{children:[Object(Y.jsx)(C.Icon,{className:"material-icons",children:"info"}),"Available in ",H.title,": ",Object(Y.jsx)("b",{children:b<c?B(b).full:B(c).full})]},"op-budget")].concat(Object(G.a)(i))}()]})})},Be=w.default.div(Q||(Q=Object(g.a)(["\n  display: flex;\n  border-bottom: solid 1px ","44;\n  padding: 5px;\n  border-radius: 3px;\n  &.paid {\n    opacity: .5;\n  }\n  &.credit {\n    background: ",";\n  }\n"])),k.dark,k.secondary+"30"),Ee=w.default.p(H||(H=Object(g.a)(["\n  color: green;\n"]))),Fe=w.default.p(V||(V=Object(g.a)(["\n  color: red;\n"]))),Le=w.default.div(q||(q=Object(g.a)(["\n  display: flex;\n  align-items: center;\n  font-style: italic;\n  margin-bottom: .5em;\n"]))),Ie=w.default.p(J||(J=Object(g.a)(["\n  font-weight: 100;\n  margin-right: .2em;\n"]))),Me=["January","February","March","April","May","June","July","August","September","October","November","December"],Ue=function(){var e=Object(i.useContext)(N.SaveState).dataset,t=Object(i.useState)(null),n=Object(d.a)(t,2),c=n[0],a=n[1],r=Object(i.useState)([]),s=Object(d.a)(r,2),o=s[0],l=s[1],j=Object(i.useState)(new Date),u=Object(d.a)(j,1)[0];if(Object(i.useEffect)((function(){e&&(a(Object(N.loadByName)(e,"settings",Te)),l(Object(N.loadAllByName)(e,"bill",Ae)))}),[e]),!c)return Object(Y.jsx)(Y.Fragment,{});return Object(Y.jsx)(C.Pane,{width:"100%",children:Object(Y.jsxs)(C.Card,{children:[Object(Y.jsx)(C.CardHeader,{children:"BigPicture"}),Object(Y.jsx)(C.Divider,{theme:k}),function(){for(var e=function(){var e={},t=new Date(u.getTime());for(t.setDate(E(new Date(c.payday),u));t.getMonth()===u.getMonth();)t.setDate(t.getDate()+14);for(;t.getMonth()!==u.getMonth();){var n=t.getMonth();e[Me[n]]=e[Me[n]]?e[Me[n]]+1:1,t.setDate(t.getDate()+14)}return e}(),t=u.getMonth()>=11?0:u.getMonth()+1,n=[],a=0,r=0;t!==u.getMonth();){var i=+c.paycheck*e[Me[t]];a+=i;var s=F(o,0,31,t+1);r+=s,n=[].concat(Object(G.a)(n),[Object(Y.jsxs)("div",{children:[Object(Y.jsxs)(C.Row,{children:[Object(Y.jsxs)(C.Title,{children:[e[Me[t]]>2&&Object(Y.jsx)(Pe,{className:"material-icons",children:"auto_awesome"}),Me[t]]}),Object(Y.jsx)(C.Spacer,{}),Object(Y.jsxs)(C.Column,{align:"center",children:[Object(Y.jsx)("h3",{children:B(i-s).dollar}),Object(Y.jsx)(D,{children:B(i).dollar}),Object(Y.jsxs)(T,{children:["(",B(s).dollar,")"]})]})]}),Object(Y.jsx)(C.Divider,{theme:k})]},Me[t])]),t=t>=11?0:t+1}return[n,Object(Y.jsxs)(R,{children:[Object(Y.jsx)(C.Icon,{className:"material-icons",children:"info"}),"Money with a Job: ",Object(Y.jsxs)("b",{children:[Math.round(r/a*100),"%"]})]},"money-usage")]}()]})})},Pe=w.default.span(W||(W=Object(g.a)(["\n        font-size: .7em;\n        position: absolute;\n        top: -.3em;\n        right: -1em;\n        color: ","\n        "])),k.secondary),Qe=function(e){var t=e.user,n=Object(i.useContext)(N.SaveState),c=n.queue,a=n.saveFromQ,r=Object(i.useContext)(A).mui;return Object(Y.jsxs)(He,{children:[Object(Y.jsxs)(C.HeaderBar,{theme:k,children:[Object(Y.jsxs)("h2",{children:[t?"".concat(t.name,"'s"):"My"," Budget"]}),Object(Y.jsx)(C.Spacer,{}),Object(Y.jsx)(f.b,{to:"/profile",children:Object(Y.jsx)(v.a,{color:"inherit",children:Object(Y.jsx)("span",{className:"material-icons",children:"person"})})})]}),Object(Y.jsxs)(Ve,{children:[Object(Y.jsx)(Ce,{}),Object(Y.jsx)(Re,{}),Object(Y.jsx)(Ue,{})]}),Object(Y.jsx)(S.a,{ui:r,save:a,queue:c})]})},He=w.default.div(_||(_=Object(g.a)(["\n  background: ",';\n  height: 100%;\n  display: grid;\n  grid-template-rows: 5.2em 1fr;\n  grid-template-areas: \n  "header"\n  "main";\n  '])),k.light),Ve=w.default.div(z||(z=Object(g.a)(["\n  background: ",";\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 400px));\n  justify-content: center; \n  grid-area: main;\n"])),k.light),qe=Object(O.newTheme)(k);var Je=function(){var e=Object(i.useState)(),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(),r=Object(d.a)(a,2),s=r[0],o=r[1],j=Object(i.useState)(),g=Object(d.a)(j,2),v=g[0],y=g[1],S=Object(i.useState)(),C=Object(d.a)(S,2),N=C[0],w=C[1],D=Object(i.useState)([]),T=Object(d.a)(D,2),R=T[0],B=T[1],E=Object(i.useState)(),F=Object(d.a)(E,2),L=F[0],I=F[1],M=Object(i.useState)(),U=Object(d.a)(M,2),P=U[0],Q=U[1],H=Object(i.useState)(!1),V=Object(d.a)(H,2),q=V[0],J=V[1];function W(){return(W=Object(b.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.save)(R);case 2:t=e.sent,o(t),B([]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){var e=function(){var e=Object(b.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.handleIncomingRedirect)();case 2:t=Object(h.getDefaultSession)(),(n=t.info).isLoggedIn?I(n.webId):Object(O.appLogin)();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[n]),Object(i.useEffect)((function(){L&&Object(O.loadThing)(L,O.profileStruct).then((function(e){e instanceof Error?(console.error(e),c(e)):Q(e)}))}),[L]),Object(i.useEffect)((function(){P&&Object(O.loadDataset)(Object(O.getDomain)(L)+"/budget").then(o)}),[P,L]),Object(Y.jsx)(O.SaveState.Provider,{value:{queue:R,updateQueue:B,saveFromQ:function(){return W.apply(this,arguments)},dataset:s,setDataset:o,accounts:v,setAccounts:y,buckets:N,setBuckets:w},children:Object(Y.jsx)(A.Provider,{value:Object(l.a)(Object(l.a)({},k),{},{mui:p}),children:Object(Y.jsx)(m.a,{theme:qe,children:Object(Y.jsx)(O.Main,{children:Object(Y.jsx)(f.a,{children:Object(Y.jsxs)(x.c,{children:[Object(Y.jsx)(x.a,{path:"/",element:Object(Y.jsx)(Qe,{user:P})}),Object(Y.jsx)(x.a,{path:"/profile",element:Object(Y.jsx)(O.SaveState.Consumer,{children:function(e){return Object(Y.jsx)(O.Profile,{profile:P,edit:q,toggleEdit:J,ui:p,theme:k,saveState:e,onChange:Q})}})})]})})})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(Y.jsx)(Je,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[519,1,2]]]);
//# sourceMappingURL=main.738af2a4.chunk.js.map